(()=>{"use strict";const e=document.getElementById("searchButton"),t=document.getElementById("summary"),n=document.getElementById("cityNameInput"),o=document.getElementById("cityImage"),i=(document.querySelector("body"),document.getElementById("boxInfo")),s=document.getElementById("box-generale"),a=document.createElement("h2"),c=document.getElementById("cityDropdown"),l=document.querySelectorAll("#cityDropdown li");const r=document.querySelector(".box-categorie");function d(e){const n=document.getElementById("messageError");n.innerHTML="",n.classList.remove("messageError"),axios.get(`https://api.teleport.org/api/urban_areas/slug:${e}/images/`).then((function(n){let o=n.data.photos[0]?.image?.mobile;if(o){if(""!==e){s.style.backgroundImage=`url(${o})`,s.style.backgroundSize="contain";let e=document.createElement("div");e.style.backgroundImage=`url(${o})`,e.classList.add("overlay-image"),s.appendChild(e)}axios.get(`https://api.teleport.org/api/urban_areas/slug:${e}/scores/`).then((function(n){let o=n.data;a.textContent=e;let i=document.getElementById("header");i.innerHTML="",i.appendChild(a),a.style.textAlign="center",a.style.fontSize="36px",a.style.fontWeight="700",t.innerHTML=n.data.summary,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].forEach((e=>{let t=document.createElement("div"),n=document.createElement("h3"),i=document.createElement("p");n.textContent=o.categories[e].name,i.textContent=o.categories[e].score_out_of_10.toFixed(2);let s=document.createElement("progress");s.value=o.categories[e].score_out_of_10,s.max=10,t.appendChild(n),t.appendChild(i),t.appendChild(s),r.appendChild(t),t.classList.add("categories")}))})).catch((function(e){console.log("Error fetching scores: ",e),m()})),s.style.height="80%"}})).catch((function(e){console.log("Error fetching image: ",e),m()}))}function m(){const e=document.createElement("p");e.innerHTML="City not found";const n=document.getElementById("messageError");n.innerHTML="",n.appendChild(e),n.classList.add("messageError"),o.style.visibility="hidden",t.innerHTML="",a.textContent="",document.querySelectorAll(".categories").forEach((e=>e.remove()))}l.forEach((e=>{e.addEventListener("click",(()=>{d(e.textContent),o.src="",document.querySelectorAll(".categories").forEach((e=>e.remove())),c.style.display="none",c.style.display="none"}))})),n.addEventListener("input",(function(){!async function(e){try{const t=(await axios.get("https://api.teleport.org/api/urban_areas/")).data._links["ua:item"];c.innerHTML="";const i=t.filter((t=>t.name.toLowerCase().includes(e.toLowerCase())));i.forEach((e=>{const t=document.createElement("li"),i=e.name;t.textContent=i,t.addEventListener("click",(function(){const e=i.toLowerCase();n.value=e,o.src="",c.style.display="none"})),c.appendChild(t)})),c.classList.toggle("show",i.length>0)}catch(e){console.error("Error during API request:",e.message)}}(n.value.trim()),s.style.height="100%",i.style.visibility="hidden",r.style.visibility="hidden",o.style.visibility="hidden",c.style.display="block"})),e.addEventListener("click",(function(){d(n.value),i.classList.remove("d-none"),i.classList.add("boxInfo"),i.style.visibility="visible",r.style.visibility="visible",s.style.height="50%"})),e.addEventListener("click",(function(){o.src="",t.innerHTML="",document.querySelectorAll(".categories").forEach((e=>e.remove()));const e=n.value;a.textContent=e,document.getElementById("header").appendChild(a),e?(i.classList.remove("d-none"),i.classList.add("boxInfo")):i.classList.add("d-none")}))})();